Script started on Wed Dec 03 23:47:21 2014
sh-4.3$ cat client.cpp
///////////////////////////////////////////
// Addison Snyder
// CS 3270 Kresman
///////////////////////////////////////////

#include <iostream>
#include "clientServer.h"
#include <sys/types.h>
#include <sys/socket.h>

int connectToHost (int , char * , int );
void append(char *, char);


using namespace std;

int main(int argc, char* argv[])
{
        int socketNO, connect, n, done;
        cout << "Entered server: " << argv[1] << "\n\n";        // takes second argument (1st is program name) and accepts as server address
        char *serv = argv[1];
        char buffer[128] = "";                                  // outgoing buffer for command line arguments (names to send to finger server)
        char in[256];                                           // input buffer for messages recieved from finger server

        socketNO = socket(AF_INET, SOCK_STREAM, 0);             // sets up The socket connection (streaming, no flags)

        connect = connectToHost(socketNO, serv, 79);            // connects to server using supplied address
        if(connect != 0)
                cout << "Error code " << connect << "!\n";      // basic error reaction
        else
                cout << "Connected!\n";

        strcat(buffer, argv[2]);                                // adds first argument to buffer (required for program)

        for(int i = 3; i < argc; i++)                           // adds any additional arguments
        {
                append(buffer,' ');
                strcat(buffer, argv[i]);
        }

        append(buffer, '\n');                                   // appends newline to finalize message
        cout << "BUFFER: " << buffer;

        send(socketNO, buffer, 64, 0);                          // send message

        cout << "MESSAGE!\n";
        n = 1;
        while(n != 0){                                          // recieve and display 256 bytes at a time, until eof
                n = read(socketNO, in, 256);
                for(int i=0; i<n; i++) {
                        cout << in[i];}
        }
        done = close(socketNO);                                 // close socket connection
        cout << "\nCLOSING SocketNO = " << socketNO << "\ndone = " << done << "\n";
        return 0;                                               // kill program
}

void append(char* s, char c)    // adds single char to end of c-string
{
        int len = strlen(s);
        s[len] = c;
        s[len+1] = '\0';
}
sh-4.3$ g++cat client.cppsh-4.3$ THE PHOTO UTILITY IS INTERUPTING THE PROGRAM. IT WORKS, AND I CAN DEMONSTRATE IT IN PERSON IF NNEEDED.[A [60Pclient voyager.cs.bgsu.edu kresman
[K[Ash-4.3$ client voyager.cs.bgsu.edu kresman gzimmersh-4.3$ g++ client.cpp /home/cs/kresman/3270/clientMod.o -o client -lsocket -lnsl
sh-4.3$ g++ client.cpp /home/cs/kresman/3270/clientMod.o -o client -lsocket -lnslsh-4.3$ cat client.cpp[Ksh-4.3$ THE PHOTO UTILITY IS INTERUPTING THE PROGRAM. IT WORKS, AND I CAN DEMONSTRATE IT IN PERSON IF NNEEDED.[A [60Pclient voyager.cs.bgsu.edu kresman
[K[Ash-4.3$ client voyager.cs.bgsu.edu kresman
Entered server: voyager.cs.bgsu.edu

hostname is  voyager.cs.bgsu.edu
User: ajsnyde Wed Dec  3 23:47:44 2014
 
Connected!
BUFFER: kresman
MESSAGE!
Login: kresman                          Name: Ray Kresman
Directory: /home/classes/kresman        Shell: /bin/bash
Last login Wed Dec  3 13:47 (EST) on pts/7 from kresman-new.cs.bgsu.edu
No mail.
No Plan.

CLOSING SocketNO = 3
done = 0
sh-4.3$ client voyager.cs.bgsu.edu kresmansh-4.3$ g++ client.cpp /home/cs/kresman/3270/clientMod.o -o client -lsocket -lnslsh-4.3$ cat client.cpp[Ksh-4.3$ THE PHOTO UTILITY IS INTERUPTING THE PROGRAM. IT WORKS, AND I CAN DEMONSTRATE IT IN PERSON IF NNEEDED.[A [60Pclient voyager.cs.bgsu.edu kresman
[K[Ash-4.3$ client voyager.cs.bgsu.edu kresman gzimmer
Entered server: voyager.cs.bgsu.edu

hostname is  voyager.cs.bgsu.edu
User: ajsnyde Wed Dec  3 23:47:51 2014
 
Connected!
BUFFER: kresman gzimmer
MESSAGE!
Login: kresman                          Name: Ray Kresman
Directory: /home/classes/kresman        Shell: /bin/bash
Last login Wed Dec  3 13:47 (EST) on pts/7 from kresman-new.cs.bgsu.edu
No mail.
No Plan.

Login: gzimmer                          Name: Guy Zimmerman
Directory: /home/classes/gzimmer        Shell: /bin/bash
Last login Wed Sep 10 23:00 (EDT) on pts/1 from cpe-24-210-133-213.woh.res.rr.com
No mail.
No Plan.

CLOSING SocketNO = 3
done = 0
sh-4.3$ exit

script done on Wed Dec 03 23:47:59 2014
